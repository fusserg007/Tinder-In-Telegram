Этот Telegram-бот представляет собой приложение для знакомств, которое позволяет пользователям регистрироваться, создавать профили, искать потенциальных партнеров и взаимодействовать с ними через систему лайков. Ниже приведено подробное описание работы бота:

### Основные функции бота:

1. **Регистрация пользователя**:
   - Пользователь начинает взаимодействие с ботом командой `/start`.
   - Бот запрашивает у пользователя информацию для создания профиля:
     - Имя
     - Пол (М или Ж)
     - Возраст (должен быть больше 18 лет)
     - Город
     - Предпочтения по полу (кого ищет пользователь: М или Ж)
     - Фотография (опционально, можно пропустить командой `/skip`)
   - Все данные сохраняются в базе данных SQLite.

2. **Просмотр и редактирование профиля**:
   - Пользователь может просмотреть свой профиль с помощью команды `/myprofile`. Бот отображает информацию о пользователе, включая имя, пол, возраст, город, предпочтения и фотографию (если она была загружена).
   - Пользователь может редактировать свой профиль с помощью команды `/editprofile` (хотя в текущей реализации эта команда не полностью реализована).

3. **Поиск партнеров**:
   - Пользователь может начать поиск потенциальных партнеров с помощью команды `/findmatch`.
   - Бот ищет пользователей, которые соответствуют предпочтениям текущего пользователя (например, если пользователь ищет мужчин, бот будет показывать только мужчин, которые ищут женщин).
   - Бот поочередно показывает анкеты подходящих пользователей. Для каждой анкеты пользователь может:
     - Поставить "лайк" (❤ Нравится)
     - Пропустить анкету (⏩ Пропустить)
   - Если два пользователя поставили друг другу "лайки", бот уведомляет их о совпадении (match) и предоставляет возможность связаться друг с другом через Telegram.

4. **Система лайков**:
   - Когда пользователь ставит "лайк" другому пользователю, информация об этом сохраняется в базе данных.
   - Если другой пользователь также ставит "лайк" текущему пользователю, бот уведомляет обоих о совпадении.
   - Лайки хранятся в отдельной таблице `likes` в базе данных.

### Техническая реализация:

1. **База данных**:
   - Используется SQLite для хранения данных пользователей и лайков.
   - Таблица `users` содержит информацию о пользователях: ID, имя, пол, возраст, город, фотография, предпочтения по полу и username.
   - Таблица `likes` содержит информацию о лайках: кто поставил лайк и кому.

2. **Библиотеки и инструменты**:
   - Бот написан на Python с использованием библиотеки `aiogram` для работы с Telegram API.
   - Для работы с изображениями используется библиотека `PIL` (Pillow).
   - Логирование настроено с помощью стандартной библиотеки `logging`.

3. **Состояния (FSM - Finite State Machine)**:
   - Для управления процессом регистрации и поиска партнеров используется конечный автомат (FSM). Это позволяет боту запоминать текущее состояние пользователя и обрабатывать сообщения в зависимости от контекста.
   - Например, во время регистрации бот переходит от одного шага к другому (имя, пол, возраст и т.д.), сохраняя промежуточные данные.

4. **Маршрутизация**:
   - Бот использует маршрутизацию для разделения логики обработки команд. Например, команды, связанные с поиском партнеров, вынесены в отдельный файл `search.py`.

### Пример работы бота:

1. **Регистрация**:
   - Пользователь отправляет `/start`.
   - Бот запрашивает имя, пол, возраст, город и предпочтения.
   - Пользователь может загрузить фотографию или пропустить этот шаг.
   - После завершения регистрации бот сообщает, что профиль создан.

2. **Поиск партнеров**:
   - Пользователь отправляет `/findmatch`.
   - Бот начинает показывать анкеты пользователей, соответствующих предпочтениям.
   - Пользователь может ставить лайки или пропускать анкеты.
   - Если происходит взаимный лайк, бот уведомляет обоих пользователей.

3. **Просмотр профиля**:
   - Пользователь отправляет `/myprofile`.
   - Бот отображает информацию о профиле, включая фотографию (если она есть).

### Возможные улучшения:

1. **Редактирование профиля**:
   - В текущей реализации команда `/editprofile` не полностью реализована. Можно добавить возможность редактирования каждого поля профиля.

2. **Расширенные фильтры поиска**:
   - Можно добавить дополнительные фильтры для поиска, например, по возрасту или городу.

3. **Уведомления**:
   - Можно добавить уведомления о новых лайках или сообщениях от других пользователей.

4. **Безопасность**:
   - Добавить проверку на корректность вводимых данных (например, валидацию возраста или города).

Этот бот предоставляет базовый функционал для знакомств и может быть расширен в зависимости от потребностей пользователей.
